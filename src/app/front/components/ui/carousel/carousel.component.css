/* Modernized carousel styles (replaces previous embla naming) */
.carousel.shell {
  position: relative;
  width: 100%;
  max-width: 1180px;
  margin-inline: auto;
  isolation: isolate;
  --radius: 18px;
  --thumb-size: 62px;
  --accent: #2563eb;
  --accent-glow: 0 0 0 1px rgba(37,99,235,.35), 0 4px 22px -4px rgba(37,99,235,.35);
  --carousel-height: clamp(300px, 55vh, 560px);
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.carousel.shell.framed {
  padding: 8px;
  border-radius: calc(var(--radius) + 6px);
  background: linear-gradient(145deg,#0f172a,#1e293b);
  box-shadow: 0 10px 34px -10px rgba(0,0,0,.55);
}

.viewport {
  overflow: hidden;
  border-radius: var(--radius);
  height: var(--carousel-height);
  position: relative;
}

.track {
  display: flex;
  height: 100%;
  user-select: none;
}

.slide {
  flex: 0 0 100%;
  position: relative;
  height: 100%;
}
.slide .media {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.slide .media img {
  width: 100%;
  height: 100%;
  object-fit: var(--fit, cover);
  display: block;
  filter: contrast(1.06) saturate(1.08);
  transform-origin: center;
  transition: opacity .5s ease;
  will-change: transform;
}
.slide.active .media img {
  opacity: 1;
}

.media.kenburns img {
  animation: kenburns 16s ease-in-out forwards;
}
@keyframes kenburns {
  0% { transform: scale(1) translateZ(0); }
  100% { transform: scale(1.05) translateZ(0); }
}

/* Gradient overlays */
.gradient-top, .gradient-bottom {
  position: absolute;
  left: 0; right: 0;
  height: 20%;
  pointer-events: none;
  z-index: 2;
}
.gradient-top {
  top: 0;
  background: linear-gradient(to bottom, rgba(0,0,0,.45), transparent);
}
.gradient-bottom {
  bottom: 0;
  background: linear-gradient(to top, rgba(0,0,0,.55), transparent);
}

/* Progress bar (slim) */
.progress {
  position: relative;
  height: 4px;
  background: #1e293b;
  border-radius: 999px;
  overflow: hidden;
}
.progress .bar {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), #3b82f6);
  width: 0;
  transition: width .25s linear;
}

/* Nav buttons */
.nav.primary {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  pointer-events: none;
  padding: 0 10px;
}
.nav.primary .btn {
  pointer-events: auto;
  background: rgba(15,23,42,.55);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.08);
  color: #e5e7eb;
  width: 46px;
  height: 46px;
  display: grid;
  place-items: center;
  border-radius: 12px;
  cursor: pointer;
  transition: background .3s, transform .3s;
}
.nav.primary .btn:hover:not(:disabled) {
  background: rgba(37,99,235,.65);
  transform: translateY(-2px);
}
.nav.primary .btn:disabled {
  opacity: .4;
  cursor: default;
}

/* Thumbnails */
.thumbs {
  display: flex;
  gap: 10px;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding: 4px 2px;
  scrollbar-width: thin;
}
.thumbs.vertical {
  position: absolute;
  top: 0;
  right: -82px;
  flex-direction: column;
  height: var(--carousel-height);
  overflow-y: auto;
  padding: 4px;
}
@media (max-width: 1050px) {
  .thumbs.vertical {
    position: static;
    flex-direction: row;
    height: auto;
  }
}
.thumb {
  position: relative;
  flex: 0 0 var(--thumb-size);
  width: var(--thumb-size);
  height: var(--thumb-size);
  border-radius: 12px;
  overflow: hidden;
  background: #1e293b;
  cursor: pointer;
  border: 1px solid #334155;
  padding: 0;
}
.thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.thumb.active {
  box-shadow: var(--accent-glow);
  border-color: var(--accent);
}
.thumb .ring {
  position: absolute;
  inset: 0;
  border: 2px solid transparent;
  border-radius: inherit;
  transition: border-color .3s;
}
.thumb.active .ring { border-color: var(--accent); }

.more-indicator {
  display: grid;
  place-items: center;
  background: #1e293b;
  color: #94a3b8;
  font-size: .8rem;
  padding: 0 10px;
  border-radius: 10px;
  min-width: 56px;
  border: 1px solid #334155;
}

/* Variants */
.variant-focus .viewport {
  box-shadow: 0 14px 40px -12px rgba(0,0,0,.6), 0 0 0 1px rgba(255,255,255,.04);
}

.variant-filmstrip .thumbs {
  order: 2;
  margin-top: -4px;
}

.variant-split {
  padding-right: 90px;
}
.variant-split .thumbs.vertical .thumb {
  width: 74px;
  height: 54px;
  flex: 0 0 74px;
}
.variant-split .thumbs.vertical {
  gap: 8px;
}

::-webkit-scrollbar {
  height: 8px;
  width: 8px;
}
::-webkit-scrollbar-track {
  background: #0f172a;
}
::-webkit-scrollbar-thumb {
  background: #334155;
  border-radius: 8px;
}
::-webkit-scrollbar-thumb:hover {
  background: #475569;
}